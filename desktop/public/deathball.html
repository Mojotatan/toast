<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <style>
      body {margin: 0}
      .containment {position: relative; width: 100%; height: 100vh; overflow: hidden}
      .ball {position: absolute; top: -80px; border-radius: 50%}
      .ball {animation-name: bounce; animation-duration: 3s; animation-iteration-count: infinite; animation-timing-function: ease}
      .ball.drop {top: 100%}

      @keyframes bounce {
        0%, 100% {top: -80px}
        50% {top: 100%}
      }
    </style>
  </head>
  <body>
    <div id="top" class="containment">
      <!-- <div id="ball" class="ball"></div> -->
    </div>
    <script type="text/javascript">
      function setUp() {
        let top = document.getElementById('top')
        for (var i = 0; i < 300; i++) {
          let newBall = document.createElement('div')
          newBall.className = 'ball'
          let delay = Math.floor(Math.random() * 1000) * 2.5
          newBall.style.animationDelay = `${delay}ms`
          newBall.style.left = `${Math.floor(Math.random() * 101)}%`
          newBall.style.transform = 'translateX(-50%)'
          let radius = Math.floor(Math.random() * 6) * 10 + 20
          newBall.style.width = `${radius}px`
          newBall.style.height = `${radius}px`
          let colors = ['red', 'green', 'blue']
          newBall.style.backgroundColor = colors[Math.floor(Math.random() * colors.length)]
          top.appendChild(newBall)
        }
      }
      setUp()
      window.onload = function() {
        // let balls = document.getElementsByClassName('ball')
        // Array.from(balls).forEach(ball => {
        //   ball.className += ' drop'
        //   let delay = Number(ball.style.transitionDelay.slice(0, -2))
        //   setTimeout(function(ball) {
        //     ball.style.transitionDelay = '0ms'
        //     setInterval(function(ball) {
        //       ball.className = 'ball drop'
        //       ball.style.transitionTimingFunction = 'ease-in'
        //     }, 4000, ball)
        //   }, delay, ball)

        //   setTimeout(function(ball, delay) {
        //     ball.className = 'ball'
        //     ball.style.transitionTimingFunction = 'ease-out'
        //     setInterval(function(ball) {
        //       ball.className = 'ball'
        //       ball.style.transitionTimingFunction = 'ease-out'
        //     }, 4000, ball)
        //   }, delay + 2000, ball, delay)
        // })
      }
    </script>
  </body>
</html>
